# tue-documentation

This targets provides the tools to generate documentation for all catkin packages in the system workspace. [catkin_tools_document](https://github.com/mikepurvis/catkin_tools_document) is used for this. It generates documentation per package, which can be configured according to [rosdoc_lite](http://wiki.ros.org/rosdoc_lite)([source](https://github.com/ros-infrastructure/rosdoc_lite.git)) and an overview page, which also includes messages, services, changelog, etc..

By default [Doxygen](http://www.doxygen.org/) documentation is generated if no `rosdoc` configuration is provided. It will document both Python and C++ in one API documentation. Also it can lead to missing and/or unnecessary information. These results are undesired. Therefore a `rosdoc` configuration is recommended.
To do this create a yaml file in the main folder of your package, for consistency name it `rosdoc.yaml` Add the following lines to your `package.xml`:

```xml
<export>
  <rosdoc config="rosdoc.yaml" />
</export>
```

Check [Python](#Python) and [C++](#c) for the configuration of the `rosdoc` configuration.

The overview page is configured by the [catkin_tools_document_config.yaml](./catkin_tools_document_config.yaml) in this target. The image path is relative to the `${TUE_ENV_WS_DIR}/build/docs`. It ends up here in this target. This is possible as the target location relative to the workspace is fixed.

## Generation

Make sure all documentation dependencies are installed by running `tue-get install/update` with the `--doc-depend` option. To generate the documetation run `tue-make-documentation` it wraps `catkin` and therefore accepts all `catkin` arguments. After generating the documentation, you can open the documentation in your browser:

```bash
<your-browser> $TUE_DOCS_PATH
```

Or copy the value of `$TUE_DOCS_PATH` into the urlbar.

## Python

Python documentation is generated by [Sphinx](http://sphinx-doc.org/). A fully dynamic Sphinx configuration is available: [config](https://github.com/tue-robotics/tue_documentation_python.git). Add this to your package as a submodule,

```bash
git submodule add -b master https://github.com/tue-robotics/tue_documentation_python.git FOLDER
```

Use `docs` or `docs/python` for `FOLDER`. Preferably `docs` is used in packages with only Python and `docs/python` if also other programming languages are used.

Add the following item to your `rosdoc` configuration:

```yaml
- builder: sphinx
  sphinx_root_dir: docs # docs/python
  name: Python API
  output_dir: python # Only needed in case of multiple programming languages
```

Also the following `<doc_depend>` needs to be added to the `package.xml` of your package:

```xml
<doc_depend>python3-sphinx</doc_depend>
<doc_depend>python-sphinx-autoapi-pip</doc_depend>
<doc_depend>python-sphinx-rtd-theme-pip</doc_depend>
<doc_depend>python3-yaml</doc_depend>
```

**_Note_: This requires package format 2 or 3**

To debug the generation of the python documentation, go to the location of the Sphinx configuration and run `make html`. Warnings will be shown in case of any missing imports or incorrect styling of docstrings.

## C++

C++ documentation is generated by Doxygen. No special configuration directory is needed, all is captured in the `rosdoc` configuration:

```yaml
- builder: doxygen
  name: C++ API
  output_dir: cpp # Only needed in case of multiple programming languages
  file_patterns: '*.c *.cpp *.h *.hpp' # Adjust to match all your cpp extensions
  tab_size: 4 # keep this 4 for consistency
  use_mdfile_as_mainpage: README.md # Show a MD file as mainpage, remove otherwise
  exclude_patterns: 'docs* *.py' # Only needed in case of python documentation or adjust to your package
```

Also the following `<doc_depend>` need to be added to the `package.xml` of your package:

```xml
<doc_depend>doxygen</doc_depend>
```

**_Note_: This requires package format 2 or 3**
